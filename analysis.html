<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Why Is My Heater Using 2x The Energy?</title>
<meta property="og:title" content="Why Is My Heater Using 2x The Energy?">
<meta property="og:description" content="Deep-dive analysis of 18,240 half-hourly readings across 3 timer regimes. The 3.11 kW element runs 6.2 h/day under the current timer vs 3.4 h/day under Cozy.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://cheparukhin.github.io/octopus/analysis.html">
<meta property="og:image" content="https://cheparukhin.github.io/octopus/og-analysis.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',system-ui,sans-serif;background:#0a0e17;color:#c8d6e5;line-height:1.7}
.container{max-width:1100px;margin:0 auto;padding:24px 20px 60px}

/* Hero */
.hero{text-align:center;padding:48px 0 40px}
.hero h1{font-size:2.4em;color:#fff;letter-spacing:-0.02em;line-height:1.2}
.hero .lead{color:#7f8fa6;font-size:1.05em;margin:12px auto 0;max-width:640px}
.stats{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:36px}
.stat{background:#141b2d;border-radius:14px;padding:24px 16px;border:1px solid #1e2a42;text-align:center;transition:border-color .2s}
.stat:nth-child(1){border-color:#00d2ff40}
.stat:nth-child(2){border-color:#ffa50240}
.stat:nth-child(3){border-color:#ff6b6b40}
.stat:nth-child(4){border-color:#00d2ff40}
.stat .num{font-size:2.6em;font-weight:800;line-height:1;letter-spacing:-0.03em}
.stat:nth-child(1) .num{color:#00d2ff}
.stat:nth-child(2) .num{color:#ffa502}
.stat:nth-child(3) .num{color:#ff6b6b}
.stat:nth-child(4) .num{color:#00d2ff}
.stat .label{color:#7f8fa6;font-size:0.85em;margin-top:6px;line-height:1.3}

/* Sections */
section{margin-top:56px}
section h2{font-size:1.6em;color:#fff;margin-bottom:6px;letter-spacing:-0.01em}
section .section-lead{color:#7f8fa6;font-size:0.92em;margin-bottom:24px;max-width:720px}

/* Cards */
.card{background:#141b2d;border-radius:12px;padding:24px;margin-bottom:24px;border:1px solid #1e2a42}
.card h3{color:#00d2ff;font-size:1.05em;margin-bottom:4px}
.card .desc{color:#7f8fa6;font-size:0.85em;margin-bottom:16px}

/* Charts */
.chart-container{position:relative;width:100%}
.chart-tall{height:400px}
.chart-med{height:340px}

/* Insight box */
.insight-box{background:#0d1321;border-left:3px solid #00d2ff;padding:14px 18px;margin:16px 0 0;border-radius:0 8px 8px 0;font-size:0.92em}
.insight-box strong{color:#00d2ff}

/* Summary table */
.summary-table{width:100%;border-collapse:collapse;font-size:0.88em;margin:16px 0}
.summary-table th{background:#1e2a42;color:#00d2ff;padding:10px 14px;text-align:right;font-weight:600}
.summary-table td{padding:9px 14px;border-bottom:1px solid #1e2a42;text-align:right}
.summary-table th:first-child,.summary-table td:first-child{text-align:left}
.summary-table tr:hover td{background:#1a2235}
.summary-table .regime-dot{display:inline-block;width:10px;height:10px;border-radius:3px;margin-right:8px;vertical-align:middle}

/* Methodology steps */
.steps{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin:24px 0}
.step{background:#0d1321;border-radius:12px;padding:24px 20px;border:1px solid #1e2a42;position:relative}
.step-num{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:50%;background:#00d2ff;color:#0a0e17;font-weight:800;font-size:0.95em;margin-bottom:12px}
.step h4{color:#fff;font-size:0.95em;margin-bottom:8px}
.step p{color:#a4b0be;font-size:0.85em;line-height:1.6}

/* Cost summary */
.cost-summary{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin:20px 0}
.cost-item{background:#0d1321;border-radius:10px;padding:18px;text-align:center;border:1px solid #1e2a42}
.cost-item .amount{font-size:1.8em;font-weight:700;color:#fff;line-height:1}
.cost-item .pct{font-size:0.85em;color:#7f8fa6;margin-top:2px}
.cost-item .cost-label{font-size:0.82em;color:#7f8fa6;margin-top:6px}

/* Conclusion */
.conclusion{background:linear-gradient(135deg,#0d1321,#141b2d);border:1px solid #00d2ff30;border-radius:12px;padding:28px;margin-top:24px;font-size:0.95em;line-height:1.7}
.conclusion strong{color:#00d2ff}

/* Footer */
.footer{text-align:center;color:#4a5568;font-size:0.8em;margin-top:48px;padding-top:24px;border-top:1px solid #1e2a42}
.footer a{color:#7f8fa6}

/* Responsive */
@media(max-width:900px){
  .stats{grid-template-columns:repeat(2,1fr)}
  .steps{grid-template-columns:1fr}
  .cost-summary{grid-template-columns:1fr}
  .hero h1{font-size:1.8em}
  .stat .num{font-size:2em}
}
@media(max-width:500px){
  .stats{grid-template-columns:1fr}
  section h2{font-size:1.3em}
}
</style>
</head>
<body>
<div class="container">

<!-- ===== 1. HERO ===== -->
<div class="hero">
  <h1>Why Is My Heater Using 2&times; The Energy?</h1>
  <p class="lead">Analysing 18,240 half-hourly smart meter readings across 12 months and 3 timer regimes on the Octopus Agile tariff.</p>
  <div class="stats">
    <div class="stat"><div class="num">+87%</div><div class="label">of the increase is the timer</div></div>
    <div class="stat"><div class="num">6.2 h</div><div class="label">element run-time per day (was&nbsp;3.4)</div></div>
    <div class="stat"><div class="num">~&pound;275</div><div class="label">extra annual cost</div></div>
    <div class="stat"><div class="num">19.3</div><div class="label">heater kWh/day (was&nbsp;10.4)</div></div>
  </div>
</div>

<!-- ===== 2. THE WHOLE YEAR AT A GLANCE ===== -->
<section>
  <h2>The Whole Year at a Glance</h2>
  <p class="section-lead">Daily energy consumption, decomposed into heater (cyan) and household (grey). The 7-day rolling average (white line) reveals three distinct phases.</p>
  <div class="card">
    <div class="chart-container chart-tall"><canvas id="chartTimeline"></canvas></div>
    <div class="insight-box">
      <strong>August 26:</strong> the 7-day average jumps ~6 kWh/day overnight when the timer switches to the Current regime (on 20 h/day). Daily totals nearly double and stay elevated through winter.
    </div>
  </div>
</section>

<!-- ===== 3. THREE TIMER REGIMES ===== -->
<section>
  <h2>Three Timer Regimes</h2>
  <p class="section-lead">Each regime has a distinctive half-hourly &ldquo;fingerprint&rdquo;. Night-only concentrates in one evening window; Cozy splits across three dip windows; Current spreads energy use across almost the entire day.</p>
  <div class="card">
    <h3>Half-Hourly Consumption Profile</h3>
    <p class="desc">Average kWh per half-hour slot across the day (UK local time).</p>
    <div class="chart-container chart-tall"><canvas id="chartProfiles"></canvas></div>
  </div>
  <div class="card">
    <div style="overflow-x:auto">
      <table class="summary-table">
        <thead>
          <tr><th>Regime</th><th>Timer hours</th><th>Heater kWh/day</th><th>On-time h/day</th><th>Household kWh/day</th><th>Total kWh/day</th></tr>
        </thead>
        <tbody>
          <tr>
            <td><span class="regime-dot" style="background:#ff6b6b"></span>Night-only (Mar)</td>
            <td>~5 h/day</td><td>9.6</td><td>3.1</td><td>5.5</td><td>15.1</td>
          </tr>
          <tr>
            <td><span class="regime-dot" style="background:#ffa502"></span>Cozy 3-window (May&ndash;Jun)</td>
            <td>~9 h/day</td><td>10.4</td><td>3.4</td><td>5.7</td><td>16.1</td>
          </tr>
          <tr>
            <td><span class="regime-dot" style="background:#7f8fa6"></span>Summer (Jul&ndash;Aug)</td>
            <td>~9 h/day</td><td>8.9</td><td>2.9</td><td>5.7</td><td>14.6</td>
          </tr>
          <tr>
            <td><span class="regime-dot" style="background:#00d2ff"></span>Current winter (Dec&ndash;Feb)</td>
            <td>~20 h/day</td><td>19.3</td><td>6.2</td><td>7.0</td><td>26.3</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="insight-box">
      <strong>Night-only and Cozy use almost identical heater energy</strong> (~10 kWh/day) despite very different timer patterns &mdash; both limit enabled time to &lt;9 h/day. The Current regime nearly doubles it.
    </div>
  </div>
</section>

<!-- ===== 4. METHODOLOGY ===== -->
<section>
  <h2>How We Know: Separating Heater from Household</h2>
  <p class="section-lead">A single smart meter measures everything. Here&rsquo;s how we split heater energy from household baseload.</p>
  <div class="steps">
    <div class="step">
      <div class="step-num">1</div>
      <h4>The problem</h4>
      <p>One meter measures the 3.11&nbsp;kW immersion heater and all household appliances together. We need to decompose every half-hour reading into heater vs household.</p>
    </div>
    <div class="step">
      <div class="step-num">2</div>
      <h4>The trick</h4>
      <p>Each timer regime has hours when the heater is guaranteed OFF. We measure household-only consumption during these &ldquo;clean windows&rdquo; to build a time-of-day baseline (130&nbsp;W overnight to 450&nbsp;W at the evening peak).</p>
    </div>
    <div class="step">
      <div class="step-num">3</div>
      <h4>The result</h4>
      <p>Subtract the hourly baseline from each reading and cap at 1.555&nbsp;kWh (element max per slot). The household baseline stays flat at ~5.5&ndash;7&nbsp;kWh/day across all regimes, confirming the split works.</p>
    </div>
  </div>
  <div class="card">
    <h3>Monthly Decomposition</h3>
    <p class="desc">Household load (grey) is stable year-round. The entire swing comes from the heater (cyan).</p>
    <div class="chart-container chart-med"><canvas id="chartMonthly"></canvas></div>
  </div>
  <div class="insight-box" style="margin-top:-12px">
    <strong>Why not simpler methods?</strong> A flat threshold (&gt;0.8&nbsp;kWh = heater) over-attributes household baseline to the heater, yielding a false element power of 2.83&nbsp;kW instead of the measured 3.11&nbsp;kW. A fixed baseline catches cooking/kettle spikes as &ldquo;heater&rdquo; energy. Only regime-specific clean windows give a stable, validated split.
  </div>
</section>

<!-- ===== 5. WHY MORE TIMER HOURS = MORE ENERGY ===== -->
<section>
  <h2>Why More Timer Hours = More Energy</h2>
  <p class="section-lead">The distribution of half-hourly readings tells the story: under Night-only, most slots are idle. Under Current, almost nothing is.</p>
  <div class="card">
    <h3>Distribution of Half-Hourly Readings</h3>
    <p class="desc">Each bin is 0.1 kWh wide. One representative month per regime.</p>
    <div class="chart-container chart-tall"><canvas id="chartDist"></canvas></div>
    <div class="insight-box">
      <strong>The physics:</strong> longer timer keeps the tank hot &rarr; higher average temperature &rarr; higher standing heat loss &rarr; element runs more to compensate. Night-only and Cozy both limit enabled time to &lt;9&nbsp;h/day, letting the tank cool freely between windows. The Current regime&rsquo;s 20&nbsp;h/day eliminates this free temperature setback &mdash; every dip is immediately corrected.
    </div>
  </div>
</section>

<!-- ===== 6. THE BILL ===== -->
<section>
  <h2>The Bill</h2>
  <p class="section-lead">Monthly electricity cost on the Octopus Agile tariff, decomposed using the same methodology.</p>
  <div class="card">
    <h3>Monthly Cost Breakdown</h3>
    <p class="desc">Stacked bars show heater (cyan) and household (grey) costs. Line shows heater share of total.</p>
    <div class="chart-container chart-med"><canvas id="chartCost"></canvas></div>
  </div>
  <div class="cost-summary">
    <div class="cost-item">
      <div class="amount" style="color:#00d2ff">&pound;884</div>
      <div class="pct">68% of total</div>
      <div class="cost-label">Heater (annual)</div>
    </div>
    <div class="cost-item">
      <div class="amount" style="color:#7f8fa6">&pound;419</div>
      <div class="pct">32% of total</div>
      <div class="cost-label">Household (annual)</div>
    </div>
    <div class="cost-item">
      <div class="amount">&pound;1,303</div>
      <div class="pct">&nbsp;</div>
      <div class="cost-label">Total (annual)</div>
    </div>
  </div>
  <div class="conclusion">
    <strong>Bottom line:</strong> reverting to the Cozy 3-window timer would save roughly <strong>&pound;275/year</strong> with no reduction in hot water during the hours that matter. The element is identical across all regimes &mdash; it&rsquo;s not a different heater, not a changed thermostat, not more hot water usage. It&rsquo;s purely more run-time: 3.4&nbsp;h/day &rarr; 6.2&nbsp;h/day.
  </div>
</section>

<div class="footer">
  Analysis of Octopus Energy smart meter data &middot; Mar 2025 &ndash; Feb 2026 &middot; <a href="https://github.com/cheparukhin/octopus">Source</a>
</div>

</div><!-- container -->

<script>
fetch('report_data.json')
  .then(r => r.json())
  .then(D => {

const CYAN = '#00d2ff';
const CYAN50 = 'rgba(0,210,255,0.5)';
const GREY = '#7f8fa6';
const GREY50 = 'rgba(127,143,166,0.5)';
const RED = '#ff6b6b';
const RED50 = 'rgba(255,107,107,0.5)';
const ORANGE = '#ffa502';
const ORANGE50 = 'rgba(255,165,2,0.5)';
const YELLOW = '#ffd32a';
const WHITE = '#ffffff';
const GRID = 'rgba(255,255,255,0.06)';
const FONT = '#a4b0be';
Chart.defaults.color = FONT;
Chart.defaults.borderColor = GRID;
Chart.defaults.font.family = "'Segoe UI', system-ui, sans-serif";

// ===== DAILY TIMELINE with regime background bands =====
const dates = D.daily.map(d => d.date);
const nightEnd = dates.indexOf('2025-04-10');
const cozyEnd = dates.indexOf('2025-08-26');
const regimeBandsPlugin = {
  id: 'regimeBands',
  beforeDraw(chart) {
    const {ctx, chartArea: {left, right, top, bottom}, scales: {x}} = chart;
    const bands = [
      [0, nightEnd >= 0 ? nightEnd : 0, 'rgba(255,107,107,0.07)'],
      [nightEnd >= 0 ? nightEnd : 0, cozyEnd >= 0 ? cozyEnd : 0, 'rgba(255,165,2,0.07)'],
      [cozyEnd >= 0 ? cozyEnd : 0, dates.length - 1, 'rgba(0,210,255,0.07)'],
    ];
    bands.forEach(([start, end, color]) => {
      const x1 = Math.max(x.getPixelForValue(start), left);
      const x2 = Math.min(x.getPixelForValue(end), right);
      ctx.save();
      ctx.fillStyle = color;
      ctx.fillRect(x1, top, x2 - x1, bottom - top);
      ctx.restore();
    });
    // Transition labels
    [[nightEnd, 'Night\u2192Cozy', ORANGE], [cozyEnd, 'Cozy\u2192Current', CYAN]].forEach(([idx, label, color]) => {
      if (idx < 0) return;
      const xp = x.getPixelForValue(idx);
      ctx.save();
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.5;
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(xp, top);
      ctx.lineTo(xp, bottom);
      ctx.stroke();
      ctx.fillStyle = color;
      ctx.font = '11px sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(label, xp, top - 5);
      ctx.restore();
    });
  }
};
new Chart(document.getElementById('chartTimeline'), {
  type: 'bar',
  data: {
    labels: dates,
    datasets: [
      { label: 'Heater', data: D.daily.map(d => d.heater),
        backgroundColor: CYAN50, borderWidth: 0, barPercentage: 1.0, categoryPercentage: 1.0 },
      { label: 'Household', data: D.daily.map(d => d.other),
        backgroundColor: GREY50, borderWidth: 0, barPercentage: 1.0, categoryPercentage: 1.0 },
      { label: '7-day avg', data: D.daily.map(d => d.rolling7),
        type: 'line', borderColor: WHITE, backgroundColor: 'transparent',
        pointRadius: 0, borderWidth: 1.5, tension: 0.3, spanGaps: true }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    scales: {
      x: { stacked: true, ticks: { maxTicksLimit: 13, callback: function(v, i) {
        const d = D.daily[i]?.date; return d ? d.substring(0, 7) : '';
      } } },
      y: { stacked: true, title: { display: true, text: 'kWh / day' } }
    },
    plugins: { legend: { position: 'top' } }
  },
  plugins: [regimeBandsPlugin]
});

// ===== HALF-HOURLY PROFILES =====
new Chart(document.getElementById('chartProfiles'), {
  type: 'line',
  data: {
    labels: D.profiles.night.map(p => p.slot),
    datasets: [
      { label: 'Night-only (Mar 2025)', data: D.profiles.night.map(p => p.mean),
        borderColor: RED, backgroundColor: 'transparent', tension: 0.3, borderWidth: 2, pointRadius: 0 },
      { label: 'Cozy 3-window (May\u2013Jun 2025)', data: D.profiles.cozy.map(p => p.mean),
        borderColor: ORANGE, backgroundColor: 'transparent', tension: 0.3, borderWidth: 2, pointRadius: 0 },
      { label: 'Summer (Jul\u2013Aug 2025)', data: D.profiles.summer.map(p => p.mean),
        borderColor: GREY, backgroundColor: 'transparent', borderDash: [5, 5], tension: 0.3, borderWidth: 1.5, pointRadius: 0 },
      { label: 'Current winter (Dec 2025\u2013Feb 2026)', data: D.profiles.current_winter.map(p => p.mean),
        borderColor: CYAN, backgroundColor: CYAN50, fill: true, tension: 0.3, borderWidth: 2, pointRadius: 0 },
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    scales: {
      x: { title: { display: true, text: 'Time of day (UK local)' },
           ticks: { maxTicksLimit: 24, callback: function(v, i) { return i % 2 === 0 ? this.getLabelForValue(v) : ''; } } },
      y: { title: { display: true, text: 'Avg kWh per half-hour' }, beginAtZero: true }
    },
    interaction: { intersect: false, mode: 'index' },
    plugins: { legend: { position: 'top' } }
  }
});

// ===== MONTHLY DECOMPOSITION =====
new Chart(document.getElementById('chartMonthly'), {
  type: 'bar',
  data: {
    labels: D.monthly.map(m => m.month),
    datasets: [
      { label: 'Heater (3.11 kW element)', data: D.monthly.map(m => m.heater),
        backgroundColor: CYAN50, borderColor: CYAN, borderWidth: 1 },
      { label: 'Household (baseline)', data: D.monthly.map(m => m.other),
        backgroundColor: GREY50, borderColor: GREY, borderWidth: 1 },
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    scales: {
      x: { stacked: true },
      y: { stacked: true, title: { display: true, text: 'Avg kWh / day' } }
    },
    plugins: { legend: { position: 'top' } }
  }
});

// ===== DISTRIBUTION =====
const distStyle = {
  'Mar 2025 (night)':   { bg: RED50,    border: RED    },
  'May 2025 (cozy)':    { bg: ORANGE50, border: ORANGE },
  'Jan 2026 (current)': { bg: CYAN50,   border: CYAN   },
};
new Chart(document.getElementById('chartDist'), {
  type: 'bar',
  data: {
    labels: D.dist_labels,
    datasets: Object.keys(D.distributions).map(k => ({
      label: k, data: D.distributions[k],
      backgroundColor: (distStyle[k] || {}).bg || GREY50,
      borderColor: (distStyle[k] || {}).border || GREY, borderWidth: 1
    }))
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    scales: {
      x: { title: { display: true, text: 'kWh per half-hour slot' },
           ticks: { maxTicksLimit: 18, callback: function(v, i) { return i % 3 === 0 ? this.getLabelForValue(v) : ''; } } },
      y: { title: { display: true, text: 'Number of readings' } }
    },
    plugins: { legend: { position: 'top' } }
  }
});

// ===== MONTHLY COST =====
new Chart(document.getElementById('chartCost'), {
  type: 'bar',
  data: {
    labels: D.cost.monthly.map(m => m.month),
    datasets: [
      { label: 'Heater cost (\u00a3)', data: D.cost.monthly.map(m => m.heater_gbp),
        backgroundColor: CYAN50, borderColor: CYAN, borderWidth: 1 },
      { label: 'Household cost (\u00a3)', data: D.cost.monthly.map(m => m.household_gbp),
        backgroundColor: GREY50, borderColor: GREY, borderWidth: 1 },
      { label: 'Heater % of total', data: D.cost.monthly.map(m => m.heater_pct),
        type: 'line', borderColor: YELLOW, backgroundColor: 'transparent',
        pointRadius: 4, pointBackgroundColor: YELLOW, yAxisID: 'y1', borderWidth: 2 },
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    scales: {
      x: { stacked: true },
      y: { stacked: true, title: { display: true, text: '\u00a3 / month' } },
      y1: { position: 'right', title: { display: true, text: 'Heater %' }, min: 0, max: 80, grid: { display: false } }
    },
    plugins: { legend: { position: 'top' } }
  }
});

}).catch(() => {
  document.querySelector('.container').insertAdjacentHTML('afterbegin',
    '<p style="color:#ff6b6b;text-align:center;padding:40px">Failed to load report_data.json</p>');
});
</script>
</body>
</html>
